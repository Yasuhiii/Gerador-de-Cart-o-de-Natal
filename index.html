<!doctype html>
<html lang="pt">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Gerador de Cart√£o de Natal</title>
  <style>
    :root{
      --bg:#0f1720; --card:#ffffff; --accent:#c71f1f; --muted:#6b7280; --gold:#d6a84b;
      --card-w:800px; --card-h:500px;
      font-family: Inter, ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    }
    *{box-sizing:border-box}
    body{background:linear-gradient(180deg,#071024 0%, #0b1220 100%); color:#e6eef8; margin:0; padding:28px;}
    .wrap{max-width:1100px;margin:0 auto;display:grid;grid-template-columns:360px 1fr;gap:24px;align-items:start}
    .panel{background:rgba(255,255,255,0.03);padding:18px;border-radius:12px;box-shadow:0 6px 18px rgba(2,6,23,0.6)}
    h1{margin:0 0 12px;font-size:20px}
    label{display:block;font-size:13px;color:var(--muted);margin-top:10px}
    input[type="text"], textarea, select{width:100%;padding:8px;border-radius:8px;border:1px solid rgba(255,255,255,0.06);background:rgba(255,255,255,0.02);color:inherit}
    textarea{min-height:90px;resize:vertical}
    .controls{display:flex;gap:8px;margin-top:12px}
    button{cursor:pointer;padding:10px 12px;border-radius:10px;border:0;background:var(--accent);color:white;font-weight:600}
    button.secondary{background:transparent;border:1px solid rgba(255,255,255,0.06);}

    /* Preview area */
    .preview-wrap{display:flex;justify-content:center;align-items:center;height:100%}
    .card{
      width:var(--card-w);height:var(--card-h);border-radius:16px;overflow:hidden;position:relative;box-shadow:0 20px 50px rgba(2,6,23,0.6);
      display:flex;flex-direction:column;align-items:center;justify-content:center;padding:36px;text-align:center;background:linear-gradient(180deg, #fff 0%, #fff 100%);
    }
    .card .title{font-size:36px;font-weight:700;margin:8px 0}
    .card .message{font-size:20px;line-height:1.3;color:rgba(0,0,0,0.8);max-width:86%;margin:6px 0}
    .card .from{margin-top:18px;font-weight:600;color:rgba(0,0,0,0.6)}

    /* Themes */
    .theme-upload{background-size:cover;background-position:center;}
    .theme-goldglow{background:#fff;border:18px solid gold;box-shadow:0 0 20px gold,0 0 40px rgba(255,215,0,0.7);} 
    .theme-blue{background:linear-gradient(180deg,#e3f2ff,#ffffff);} 
    .theme-blue .title{color:#0057b8}
    /* Themes */
    .theme-upload{background-size:cover;background-position:center;}

    .theme-goldframe{background:#fff;border:14px solid gold;box-shadow:0 0 0 22px #fff,0 0 0 30px gold;}
    .theme-goldframe .title{color:#b99300;text-shadow:0 0 8px gold;}

    .theme-snow{background:#cfe8ff;}
    .theme-snow .title{color:#003a6b}

    .theme-night{background:#0a0f2b;color:white;}
    .theme-night .title{color:#7ab8ff}

    /* Themes */
    .theme-photo{background:url('https://images.unsplash.com/photo-1544025162-d76694265947?w=1200') center/cover no-repeat;}
    .theme-photo .title{color:white;text-shadow:0 2px 6px rgba(0,0,0,0.5)}
    .theme-photo .message{color:white;text-shadow:0 2px 6px rgba(0,0,0,0.5)}
    .theme-photo .from{color:#f0f0f0;text-shadow:0 2px 6px rgba(0,0,0,0.5)}

    .theme-frame{background:#fff;border:12px solid #c71f1f;box-shadow:0 0 0 18px #fff,0 0 0 26px #c71f1f;}
    .theme-frame .title{color:#c71f1f}

    .theme-minimal{background:#ffffff;}
    .theme-minimal .title{color:#111}
    .theme-minimal .message{color:#444}
    .theme-minimal .from{color:#666}

    /* Themes */
    .theme-red{background:linear-gradient(180deg,#fff0f0,#fff);}
    .theme-red .title{color:var(--accent)}
    .theme-green{background:linear-gradient(180deg,#f0fff6,#fff);}
    .theme-green .title{color:#1f8a3f}
    .theme-gold{background:linear-gradient(180deg,#fffaf0,#fff);}
    .theme-gold .title{color:var(--gold)}

    /* Decorative star */
    .star{position:absolute;top:18px;right:18px;font-size:40px;opacity:0.9}

    /* Snow effect */
    .snowflake{position:absolute;top:-10px;left:50%;opacity:0.9;pointer-events:none}
    .snow-container{position:absolute;inset:0;overflow:hidden}
    .snow{position:absolute;width:6px;height:6px;border-radius:50%;background:white;opacity:0.9;animation:fall linear infinite}
    @keyframes fall{to{transform:translateY(110vh);opacity:0.6}}

    /* small responsive */
    @media(max-width:960px){.wrap{grid-template-columns:1fr;}.card{width:90%;height:auto;padding:28px}}

    footer{margin-top:18px;font-size:13px;color:var(--muted)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="panel">
      <h1>Gerador de Cart√£o de Natal</h1>
      <label>Para:</label>
      <input id="inputName" type="text" placeholder="Ex: Amigo" value="">

      <label>Mensagem</label>
      <textarea id="inputMessage" placeholder="Escreve aqui a tua mensagem de Natal...">Desejo-te um Natal cheio de alegria, amor e momentos inesquec√≠veis.</textarea>

      <label>De:</label>
      <input id="inputFrom" type="text" placeholder="Ex: Do teu amigo(a)" value="">

      <label>Tema</label>
      <select id="selectTheme">
        <option value="red">Vermelho cl√°ssico</option>
        <option value="green">Verde festivo</option>
        <option value="gold">Dourado elegante</option>
        <option value="photo">Foto de Fundo</option>
        <option value="frame">Moldura Decorada</option>
        <option value="minimal">Minimalista</option>
        <option value="upload">Imagem Personalizada</option>
        <option value="goldframe">Moldura Dourada</option>
        <option value="snow">Neve Suave</option>
        <option value="night">Natal Noturno</option>
      </select>

      <label>Imagem personalizada (upload)</label>
      <input id="inputImg" type="file" accept="image/*">

      <label>Emoji decorativo</label>
      <input id="inputEmoji" type="text" placeholder="üéÑüéÅ‚ú®" value="üéÑ‚ú®">

      <label>Op√ß√µes</label>
      <div style="display:flex;gap:8px;align-items:center">
        <input id="toggleSnow" type="checkbox"><label for="toggleSnow" style="margin:0 0 0 6px;color:var(--muted)">Neve</label>
      </div>

      <div class="controls">
        <button id="btnPreview">Gerar Pr√©-visualiza√ß√£o</button>
        <button id="btnDownloadPNG" class="secondary">Descarregar PNG</button>
        <button id="btnDownloadHTML" class="secondary">Descarregar HTML</button>
      </div>

      <footer>Crie um cart√£o de Natal para aquela pessoa importante para ti!!</footer>
    </div>

    <div class="panel preview-wrap">
      <div id="cardPreview" class="card theme-red" style="--card-w:var(--card-w); --card-h:var(--card-h)">
        <div class="star">‚≠ê</div>
        <div id="decorEmoji" style="font-size:28px;position:absolute;left:18px;top:18px">üéÑ</div>
        <div style="flex:1;display:flex;flex-direction:column;align-items:center;justify-content:center;padding:18px">
          <div id="cardTitle" class="title">Feliz Natal!</div>
          <div id="cardMessage" class="message">Desejo-te um Natal cheio de alegria, amor e momentos inesquec√≠veis.</div>
          <div id="cardFrom" class="from">‚Äî Da tua amiga</div>
        </div>
        <div class="snow-container" id="snowContainer"></div>
      </div>
    </div>
  </div>

  <!-- html2canvas CDN para exportar como imagem -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js"></script>
  <script>
    const inputName = document.getElementById('inputName');
    const inputMessage = document.getElementById('inputMessage');
    const inputFrom = document.getElementById('inputFrom');
    const selectTheme = document.getElementById('selectTheme');
    const inputImg = document.getElementById('inputImg');
    let uploadedURL = null;
    const toggleSnow = document.getElementById('toggleSnow');
    const inputEmoji = document.getElementById('inputEmoji');

    const btnPreview = document.getElementById('btnPreview');
    const btnDownloadPNG = document.getElementById('btnDownloadPNG');
    const btnDownloadHTML = document.getElementById('btnDownloadHTML');

    const card = document.getElementById('cardPreview');
    const cardTitle = document.getElementById('cardTitle');
    const cardMessage = document.getElementById('cardMessage');
    const cardFrom = document.getElementById('cardFrom');
    const decorEmoji = document.getElementById('decorEmoji');
    const snowContainer = document.getElementById('snowContainer');

    function clearSnow(){ snowContainer.innerHTML = '' }
    function makeSnow(){
      clearSnow();
      const count = 40;
      for(let i=0;i<count;i++){
        const s = document.createElement('div');
        s.className = 'snow';
        const size = Math.random()*6 + 3;
        s.style.width = size+'px'; s.style.height = size+'px';
        s.style.left = Math.random()*100 + '%';
        s.style.animationDuration = (6 + Math.random()*8) + 's';
        s.style.opacity = (0.6 + Math.random()*0.4);
        s.style.top = (-Math.random()*50)+'px';
        snowContainer.appendChild(s);
      }
    }

    inputImg.addEventListener('change', () => {
      const file = inputImg.files[0];
      if(file){ uploadedURL = URL.createObjectURL(file); }
    });

    function updatePreview(){
      const name = inputName.value.trim();
      const message = inputMessage.value.trim();
      const from = inputFrom.value.trim();
      const theme = selectTheme.value;
      const emoji = inputEmoji.value || '';

      card.classList.remove('theme-red','theme-green','theme-gold','theme-photo','theme-frame','theme-minimal','theme-upload','theme-goldframe','theme-snow','theme-night','theme-goldglow','theme-blue');
      if(theme === 'red') card.classList.add('theme-red');
      if(theme === 'green') card.classList.add('theme-green');
      if(theme === 'gold') card.classList.add('theme-gold');
      if(theme === 'photo') card.classList.add('theme-photo');
      if(theme === 'frame') card.classList.add('theme-frame');
      if(theme === 'minimal') card.classList.add('theme-minimal');
      if(theme === 'upload'){
        card.classList.add('theme-upload');
        if(uploadedURL) card.style.backgroundImage = `url(${uploadedURL})`;
      }
      if(theme === 'goldframe') card.classList.add('theme-goldframe');
      if(theme === 'snow') card.classList.add('theme-snow');
      if(theme === 'night') card.classList.add('theme-night');
      if(theme === 'goldglow') card.classList.add('theme-goldglow');
      if(theme === 'blue') card.classList.add('theme-blue');

      cardTitle.textContent = name ? `Feliz Natal, ${name}!` : 'Feliz Natal!';
      cardMessage.textContent = message || 'Desejo-te um Natal cheio de alegria, amor e momentos inesquec√≠veis.';
      cardFrom.textContent = from ? `‚Äî ${from}` : '';
      decorEmoji.textContent = emoji;

      if(toggleSnow.checked){ makeSnow(); } else { clearSnow(); }
    }

    btnPreview.addEventListener('click', () => { updatePreview(); });

    btnDownloadPNG.addEventListener('click', async () => {
      updatePreview();
      // usa html2canvas para capturar o cart√£o
      btnDownloadPNG.disabled = true; btnDownloadPNG.textContent = 'A processar...';
      try{
        const canvas = await html2canvas(card, {scale:2, backgroundColor: null});
        const data = canvas.toDataURL('image/png');
        const a = document.createElement('a');
        a.download = 'cartao-natal.png';
        a.href = data;
        a.click();
      }catch(err){ alert('Erro ao gerar a imagem: '+err.message) }
      btnDownloadPNG.disabled = false; btnDownloadPNG.textContent = 'Descarregar PNG';
    });

    btnDownloadHTML.addEventListener('click', () => {
      updatePreview();
      // Gera um HTML simples que cont√©m apenas o cart√£o para partilhar
      const html = `<!doctype html><meta charset="utf-8"><title>Cart√£o de Natal</title><style>body{display:flex;align-items:center;justify-content:center;height:100vh;margin:0;background:#071024} .card-wrap{width:900px;height:600px;padding:40px;box-sizing:border-box}</style><div class="card-wrap">${card.outerHTML}</div>`;
      const blob = new Blob([html], {type:'text/html'});
      const url = URL.createObjectURL(blob);
      const a = document.createElement('a'); a.href = url; a.download = 'cartao-natal.html'; a.click();
      URL.revokeObjectURL(url);
    });

    // atualiza preview ao carregar a p√°gina
    updatePreview();
  </script>
</body>
</html>
